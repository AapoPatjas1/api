<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blackjack & Roll Dice</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #6e7a88, #3a4a61);
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            text-shadow: 1px 1px 5px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease-in-out;
        }

        .container {
            width: 80%;
            max-width: 1000px;
            text-align: center;
            border-radius: 12px;
            background: rgba(0, 0, 0, 0.7);
            padding: 30px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
        }

        h1 {
            color: #FFD700;
            font-size: 3em;
            margin-bottom: 20px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .menu {
            background-color: #4CAF50;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            margin-bottom: 40px;
            transition: background-color 0.3s ease;
        }

        .menu:hover {
            background-color: #45a049;
        }

        .menu h2 {
            color: white;
            margin: 0;
            font-size: 2.5em;
        }

        .menu button {
            margin-top: 20px;
            padding: 12px 20px;
            font-size: 1.2em;
            background-color: #45a049;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 220px;
            transition: background-color 0.3s, transform 0.3s;
        }

        .menu button:hover {
            background-color: #388e3c;
            transform: scale(1.05);
        }

        .game-container {
            margin-top: 40px;
            display: none;
        }

        .game-container.active {
            display: block;
        }

        .output {
            margin-top: 20px;
            font-size: 1.5em;
            font-weight: bold;
            text-align: left;
            color: #FFF;
            margin-top: 30px;
        }

        .back-button {
            margin-top: 20px;
            padding: 12px 20px;
            background-color: #f44336;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.3s;
        }

        .back-button:hover {
            background-color: #d32f2f;
            transform: scale(1.05);
        }

        /* Add a glowing effect to buttons */
        button:active {
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
        }

        /* Fancy button transitions */
        button {
            position: relative;
            overflow: hidden;
        }

        button::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 300%;
            height: 300%;
            background: rgba(255, 255, 255, 0.3);
            transition: all 0.4s;
            border-radius: 50%;
            transform: translate(-50%, -50%) scale(0);
        }

        button:hover::after {
            transform: translate(-50%, -50%) scale(1);
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Blackjack & Roll Dice</h1>

        <!-- Main Menu -->
        <div class="menu" id="menu">
            <h2>Valitse peli</h2>
            <button onclick="showGame('blackjack')">Blackjack</button>
            <button onclick="showGame('rolldice')">Roll Dice</button>
        </div>

        <!-- Blackjack Game -->
        <div class="game-container" id="blackjack-container">
            <h2>Blackjack</h2>
            <button onclick="startBlackjack()">Aloita Blackjack</button>
            <div id="blackjack-output" class="output"></div>
            <button class="back-button" onclick="backToMenu()">Takaisin Päävalikkoon</button>
        </div>

        <!-- Roll Dice Game -->
        <div class="game-container" id="rolldice-container">
            <h2>Roll Dice</h2>
            <button onclick="rollDice(1)">Heitä Noppa 1</button>
            <button onclick="rollDice(2)">Heitä Noppa 2</button>
            <div id="rolldice-output" class="output"></div>
            <div id="dice1-output" class="output"></div> <!-- Output for Noppa 1 -->
            <div id="dice2-output" class="output"></div> <!-- Output for Noppa 2 -->
            <button class="back-button" onclick="backToMenu()">Takaisin Päävalikkoon</button>
        </div>
    </div>

    <script>
        let deckId = '';
        let player1Cards = [];
        let player2Cards = [];
        let player1Total = 0;
        let player2Total = 0;
        let player1Bust = false;
        let player2Bust = false;

        // Näyttää valitun pelin ja piilottaa päävalikon
        function showGame(game) {
            document.getElementById('menu').style.display = 'none';
            if (game === 'blackjack') {
                document.getElementById('blackjack-container').classList.add('active');
            } else if (game === 'rolldice') {
                document.getElementById('rolldice-container').classList.add('active');
            }
        }

        // Palaa takaisin päävalikkoon
        function backToMenu() {
            document.getElementById('menu').style.display = 'block';
            document.getElementById('blackjack-container').classList.remove('active');
            document.getElementById('rolldice-container').classList.remove('active');
        }

        // Blackjack Game Logic
        function startBlackjack() {
            fetch("https://deckofcardsapi.com/api/deck/new/shuffle/?deck_count=1")
                .then(response => response.json())
                .then(data => {
                    deckId = data.deck_id;
                    player1Cards = [];
                    player2Cards = [];
                    player1Total = 0;
                    player2Total = 0;
                    player1Bust = false;
                    player2Bust = false;
                    document.getElementById("blackjack-output").innerHTML = 'Deck shuffled. Now draw cards for Player 1 and Player 2.';
                    drawInitialCards();
                });
        }

        function drawInitialCards() {
            fetch(`https://deckofcardsapi.com/api/deck/${deckId}/draw/?count=2`)
                .then(response => response.json())
                .then(data => {
                    player1Cards = [data.cards[0]];
                    player2Cards = [data.cards[1]];

                    player1Total = calculateTotal(player1Cards);
                    player2Total = calculateTotal(player2Cards);

                    displayCards();
                });
        }

        function calculateTotal(cards) {
            let total = 0;
            cards.forEach(card => {
                total += getCardValue(card.value);
            });
            return total;
        }

        function getCardValue(value) {
            if (['KING', 'QUEEN', 'JACK'].includes(value)) {
                return 10;
            }
            if (value === 'ACE') {
                return 11;
            }
            return parseInt(value);
        }

        function displayCards() {
            let player1CardNames = player1Cards.map(card => `${card.value} of ${card.suit}`).join(', ');
            let player2CardNames = player2Cards.map(card => `${card.value} of ${card.suit}`).join(', ');

            document.getElementById("blackjack-output").innerHTML = `Player 1 drew: ${player1CardNames}. Total: ${player1Total}
                <br>Player 2 drew: ${player2CardNames}. Total: ${player2Total}
                <br><br>
                Player 1, your total: ${player1Total}, Player 2 total: ${player2Total}.<br>
                <button onclick="drawCard('player1')">Pelaaja 1: Vedä kortti</button>
                <button onclick="drawCard('player2')">Pelaaja 2: Vedä kortti</button>
                <br><br>Jatka vuorotellen pelaajien korttien vetämistä.`;
        }

        function drawCard(player) {
            fetch(`https://deckofcardsapi.com/api/deck/${deckId}/draw/?count=1`)
                .then(response => response.json())
                .then(data => {
                    let newCard = data.cards[0];

                    if (player === 'player1' && player1Cards.length < 3) {
                        player1Cards.push(newCard);
                        player1Total = calculateTotal(player1Cards);
                    } else if (player === 'player2' && player2Cards.length < 3) {
                        player2Cards.push(newCard);
                        player2Total = calculateTotal(player2Cards);
                    }

                    if (player1Total > 21) {
                        player1Bust = true;
                        document.getElementById("blackjack-output").innerHTML += `<br>Pelaaja 1 meni yli 21!`;
                    }
                    if (player2Total > 21) {
                        player2Bust = true;
                        document.getElementById("blackjack-output").innerHTML += `<br>Pelaaja 2 meni yli 21!`;
                    }

                    displayCards();
                });
        }

        // nopan logiikka
        function rollDice(diceNumber) {
            const result = Math.floor(Math.random() * 6) + 1; // antaa randomilla numeron 1-6
            if (diceNumber === 1) {
                document.getElementById("dice1-output").innerHTML = `Noppa 1: ${result}`;
            } else if (diceNumber === 2) {
                document.getElementById("dice2-output").innerHTML = `Noppa 2: ${result}`;
            }
        }
    </script>
</body>
</html>
